<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>

<style type="text/css">
.sourceCode, .lineNumbers { margin: 0; padding: 0; border: 0; vertical-align: baseline; border: none; }
td.lineNumbers { text-align: right; border-right: 1px solid gray; color: black; padding-right: 5px; padding-left: 5px; } 
td.sourceCode { padding-left: 5px; }
pre.sourceCode span.Whitespace { }
pre.sourceCode span.Keyword { color: green; font-weight: bold;}
pre.sourceCode span.Symbol { }
pre.sourceCode span.String { color: green;}
pre.sourceCode span.Char { color: red;}
pre.sourceCode span.Number { color: teal;}
pre.sourceCode span.Regex { color: maroon;}
pre.sourceCode span.Type { color: blue;}
pre.sourceCode span.Label { color: red; text-decoration: underline;}
pre.sourceCode span.Preproc { color: blue; text-decoration: underline;}
pre.sourceCode span.Function { color: blue; font-weight: bold;}
pre.sourceCode span.Variable { color: maroon;}
pre.sourceCode span.VarId { }
pre.sourceCode span.ConId { color: blue;}
pre.sourceCode span.CBracket { color: red;}
pre.sourceCode span.Comment { color: gray;}
pre.sourceCode span.Selector { color: blue; font-weight: bold;}
pre.sourceCode span.Property { color: green;}
pre.sourceCode span.Tag { color: blue;}
pre.sourceCode span.Entity { color: green;}
pre.sourceCode span.Math { color: green;}
pre.sourceCode span.NewFile { color: green;}
pre.sourceCode span.OldFile { color: red;}
pre.sourceCode span.Alert { background-color: aqua;}
</style>

<textarea style="width: 100%; height: 400px;"></textarea>
<input value="haskell">
<button onclick="post();">hightlight</button>
<hr>
<div></div>
<hr>

<script>
$("textarea").val(window.localStorage["highlight"] || "main :: IO ()\nmain = return ()");

function post ()
{
  window.localStorage["highlight"] = $("textarea").val();
  $.ajax
    ({ type        : "POST"
     , url         : "highlight.cgi?" + $("input").val()
     , data        : $("textarea").val()
     , contentType : "text/plain; charset=utf-8"
     , success     : render
     })
}

function render (code)
{
  var e = document.createElement(e);
  e.innerHTML = code;
  $("div").html($("pre", e)[0]);
}
</script>
